<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hành Trình Của Rồng Con - Khám Phá Miền Tây</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@600;700&family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* THAY ĐỔI: Nhập phông chữ từ Google Fonts */
        /* (Đã chuyển sang <link> ở trên để tối ưu hơn) */

        :root {
            /* THAY ĐỔI: Bộ màu "Đất Phương Nam" */
            --background-color: #FAF8F5;  /* Màu kem nhạt (thay cho ảnh nền) */
            --primary-text: #4E443A;      /* Màu nâu đất đậm (thay cho xám đen) */
            --secondary-text: #6D6359;    /* Màu nâu nhạt hơn */
            --card-border: #E0DCD7;      /* Màu viền kem đậm */
            --card-bg: #ffffff;
            --stat-card-bg: #F0F4F3;      /* Màu nền thẻ stat (xanh lá rất nhạt) */
            --accent-color: #00796B;     /* Màu xanh lá cây cổ vịt (cho tiêu đề) */
        }

        body {
            /* THAY ĐỔI: Phông chữ nội dung */
            font-family: 'Nunito Sans', sans-serif; 
            
            /* THAY ĐỔI: Bỏ ảnh nền, dùng màu nền */
            background-color: var(--background-color);

            color: var(--primary-text);
            font-weight: 400; /* Đổi về 400 cho dễ đọc */
            overflow-x: hidden;
        }
        html { scroll-behavior: smooth; }

        
        /* THAY ĐỔI: Áp dụng phông chữ tiêu đề */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Lora', serif;
            font-weight: 700;
            color: var(--accent-color); /* Tiêu đề sẽ có màu nhấn */
        }


        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 70% { opacity: 1; transform: scale(1.1); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes bounceArrow { 0%, 20%, 50%, 80%, 100% { transform: translate(-50%, 0); } 40% { transform: translate(-50%, -15px); } 60% { transform: translate(-50%, -7px); } }

        
        #landing {
            height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; position: relative;
        }
        .landing-content { animation: fadeIn 1.2s ease-out forwards; }
        
        /* THAY ĐỔI: Cho chữ trên landing có màu đậm */
        #landing h1 {
            color: var(--primary-text);
        }
        #landing .text-lg {
            color: var(--secondary-text);
        }
        #landing .text-2xl {
            color: var(--secondary-text);
        }

        .scroll-down-arrow {
            position: absolute; bottom: 2rem; left: 50%;
            animation: bounceArrow 2.5s infinite; z-index: 2;
            color: var(--secondary-text); /* Đổi màu mũi tên */
        }

        /* --- Bố cục Scrollytelling (Gợi ý 1) --- */
        
        .province-section {
            padding: 10rem 1rem; 
            display: flex; 
            flex-direction: column;
            min-height: 100vh;
        }
        
        .province-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .story-grid {
            display: grid;
            grid-template-columns: 45% 1fr; 
            gap: 3rem;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        .story-sticky-visuals {
            position: sticky;
            top: 100px; 
            align-self: start; 
            height: 80vh; 
        }
        
        .map-container {
            width: 100%;
            height: 100%; 
            border-radius: 1rem; 
            overflow: hidden;
            /* THAY ĐỔI: Tăng bóng đổ cho cao cấp hơn */
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.15);
            border: 1px solid var(--card-border);
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: 0;
        }

        .story-narrative-content {
            display: flex;
            flex-direction: column;
            gap: 2rem; 
        }

        .narrative-block {
            background-color: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid var(--card-border);
            /* THAY ĐỔI: Tăng bóng đổ cho cao cấp hơn */
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.1);
            
            /* Hiệu ứng scrollytelling */
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .narrative-block.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .province-image {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 0.75rem; 
            display: block;
        }
        
        #haugiang .province-image {
            transform: none;
            width: 100%;
        }
        
        /* THAY ĐỔI: Thẻ thống kê (stat) */
        .stats-container {
            display: flex;
            gap: 1rem;
            width: 100%;
        }
        .stat-card {
            background-color: var(--stat-card-bg); /* Màu nền xanh lá nhạt */
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            flex: 1;
            border: none;
        }
        .stat-number { 
            font-size: 1.5rem; 
            font-weight: 700; 
            color: var(--accent-color); /* Số liệu có màu xanh nhấn */
            font-family: 'Nunito Sans', sans-serif; /* Số liệu dùng font không chân */
        }
        .stat-label { 
            font-size: 0.875rem; 
            color: var(--secondary-text); /* Chú thích màu nâu nhạt */
            margin-top: 0.25rem; 
            font-weight: 600; 
        }

        
        /* Hiệu ứng số đếm */
        @keyframes slideUpNumber {
            0% { opacity: 0; transform: translateY(30px); }
            50% { opacity: 0.7; transform: translateY(-5px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .stat-number.mobile-animate {
            opacity: 0;
            animation: slideUpNumber 1s ease-out forwards;
        }
        .stat-number.mobile-animate.delay-1 { animation-delay: 0.2s; }
        .stat-number.mobile-animate.delay-2 { animation-delay: 0.4s; }
        .stat-number.mobile-animate.delay-3 { animation-delay: 0.6s; }

        
        /* Mascot và Dialog */
        #mascot-container {
            position: fixed; z-index: 100;
            width: clamp(240px, 35vw, 340px);
            height: clamp(240px, 35vw, 340px);
            pointer-events: none; bottom: 2rem; opacity: 0;
            transform-origin: bottom center; transition: opacity 0.3s ease-out, left 0.3s, right 0.3s, width 0.3s, height 0.3s;
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.25));
        }
        #mascot-container.visible { opacity: 1; animation: popIn 0.5s ease-out forwards; }
        #mascot-container #mascot-img { width: 100%; height: 100%; object-fit: contain; transition: transform 0.4s ease; }
        #mascot-container.flipped #mascot-img { transform: scaleX(-1); }
        #mascot-container.position-left { left: 1.5rem; }
        #mascot-container.position-right { right: 1.5rem; }

        #dialog-box {
            position: absolute;
            background-color: var(--card-bg); /* Màu nền thẻ */
            color: var(--primary-text); /* Màu chữ nâu */
            padding: 1rem 1.25rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid var(--card-border);  
            font-weight: 600;
            line-height: 1.6;
            width: clamp(250px, 50vw, 340px);
            pointer-events: auto;
            bottom: 10rem;
            opacity: 0;
            transition: all 0.3s ease-out;
        }
        #dialog-box.visible { opacity: 1; transform: translateY(-10px); }
        #dialog-box::after {
            content: ''; position: absolute;
            border-width: 12px; border-style: solid; bottom: 1.5rem;
        }
        #dialog-box.dialog-from-left { left: calc(70% + 1rem); }
        #dialog-box.dialog-from-left::after { right: 100%; border-color: transparent var(--card-border) transparent transparent; } /* Màu viền mũi tên */
        #dialog-box.dialog-from-right { right: calc(70% + 1rem); }
        #dialog-box.dialog-from-right::after { left: 100%; border-color: transparent transparent transparent var(--card-border); } /* Màu viền mũi tên */

        /* Footer */
        .footer-container { 
            text-align: center; 
            padding: 4rem 1rem; 
            background-color: var(--card-bg); /* Màu nền thẻ */
            border-top: 1px solid var(--card-border); 
        }
        /* THAY ĐỔI: Style nút bấm ở Footer */
        .footer-container a {
            background-color: var(--accent-color); /* Màu xanh nhấn */
            color: #ffffff; /* Chữ trắng */
            font-weight: 700;
            border-radius: 99px; /* Bo tròn nút */
            padding: 0.75rem 2rem;
            transition: all 0.3s ease;
            text-decoration: none; /* Bỏ gạch chân */
            display: inline-block; /* Cần thiết cho padding */
        }
        .footer-container a:hover {
            background-color: var(--primary-text); /* Đổi sang màu nâu khi hover */
        }

        
        /* Media Query (Cho di động) */
        @media (max-width: 768px) {
            .story-grid { 
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .story-sticky-visuals { 
                position: relative;
                top: 0;
                height: 300px; 
            }

            .province-section {
                padding: 4rem 1rem; 
            }

            .narrative-block {
                padding: 1.5rem;
            }

            .province-image {
                display: block; 
            }
            
            #mascot-container {
                width: 230px;
                height: 230px;
            }
            #mascot-container.position-left { 
                left: -3rem;
            }
            #mascot-container.position-right { 
                right: -3rem; 
            }
            
            #dialog-box {
                width: 220px; 
                bottom: 7rem; 
            }
             #dialog-box.dialog-from-left { 
                 left: calc(70% + 0.5rem); 
             }
             #dialog-box.dialog-from-right { 
                 right: calc(70% + 0.5rem);
             }
        }
    </style>
</head>
<body class="bg-white text-gray-800">

<section id="landing">
    <div class="landing-content">
        <div class="landing-logo-brand mb-8 flex flex-col items-center">
            <img src="eveREst Logo-03.png" alt="Logo" class="w-24 h-24">
            <h2 class="text-2xl font-bold mt-2">Team eveREst</h2>
        </div>
        <img src="LittleDragon.png" alt="Mascot Rồng Con Tò Te" class="w-56 h-56 sm:w-64 sm:h-64 mx-auto">
        <h1 class="text-3xl sm:text-4xl font-bold mt-6 max-w-2xl mx-auto px-4">
            Khám Phá Miền Tây Cùng Rồng Con 
        </h1>
        <p class="text-lg text-gray-600 mt-4">Cùng tớ chu du qua những miền đất hứa nhé!</p>
    </div>
    <div class="scroll-down-arrow">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
    </div>
</section>

<div id="mascot-container">
    <div id="dialog-box"><p id="dialog-text"></p></div>
    <img id="mascot-img" src="LittleDragon.png" alt="Mascot Rồng Con">
</div>

<div id="provinces-container">

    <section id="soctrang" class="province-section" data-province="soctrang">
        <h2 class="province-title text-4xl sm:text-5xl font-bold">Sóc Trăng</h2>
        
        <div class="story-grid">
            <div class="story-sticky-visuals">
                <div class="map-container">
                    <iframe src="./Map of Sóc Trăng.html" loading="lazy"></iframe>
                </div>
            </div>

            <div class="story-narrative-content">
                <div class="narrative-block">
                    <div class="stats-container">
                        <div class="stat-card"><p class="stat-number" data-target="3312">0</p><p class="stat-label">Diện tích (km²)</p></div>
                        <div class="stat-card"><p class="stat-number" data-target="1199653">0</p><p class="stat-label">Dân số</p></div>
                        <div class="stat-card"><p class="stat-number" data-target="109">0</p><p class="stat-label">Xã, Phường, TT</p></div>
                    </div>
                </div>
                <div class="narrative-block">
                    <img src="soctrang.png" alt="Danh lam Sóc Trăng" class="province-image">
                </div>
            </div>
        </div>
    </section>

    <section id="haugiang" class="province-section" data-province="haugiang">
        <h2 class="province-title text-4xl sm:text-5xl font-bold">Hậu Giang</h2>
        
        <div class="story-grid">
            <div class="story-sticky-visuals">
                <div class="map-container">
                    <iframe src="./Map of Hậu Giang.html" loading="lazy"></iframe>
                </div>
            </div>

            <div class="story-narrative-content">
                <div class="narrative-block">
                    <div class="stats-container">
                        <div class="stat-card"><p class="stat-number" data-target="1621">0</p><p class="stat-label">Diện tích (km²)</p></div>
                        <div class="stat-card"><p class="stat-number" data-target="729400">0</p><p class="stat-label">Dân số</p></div>
                        <div class="stat-card"><p class="stat-number" data-target="75">0</p><p class="stat-label">Xã, Phường, TT</p></div>
                    </div>
                </div>
                <div class="narrative-block">
                    <img src="Thiết kế chưa có tên.png" alt="Danh lam Hậu Giang" class="province-image">
                </div>
            </div>
        </div>
    </section>

    <section id="cantho" class="province-section" data-province="cantho">
        <h2 class="province-title text-4xl sm:text-5xl font-bold">Cần Thơ</h2>
        
        <div class="story-grid">
            <div class="story-sticky-visuals">
                <div class="map-container">
                    <iframe src="./Map of Cần Thơ.html" loading="lazy"></iframe>
                </div>
            </div>

            <div class="story-narrative-content">
                <div class="narrative-block">
                    <div class="stats-container">
                        <div class="stat-card"><p class="stat-number" data-target="1440">0</p><p class="stat-label">Diện tích (km²)</p></div>
                        <div class="stat-card"><p class="stat-number" data-target="1252350">0</p><p class="stat-label">Dân số</p></div>
                        <div class="stat-card"><p class="stat-number" data-target="83">0</p><p class="stat-label">Xã, Phường, TT</p></div>
                    </div>
                </div>
                <div class="narrative-block">
                    <img src="Thiết kế chưa có tên (1).png" alt="Danh lam Cần Thơ" class="province-image">
                </div>
            </div>
        </div>
    </section>
</div>

<footer class="footer-container">
    <h2 class="text-3xl font-bold">Cảm ơn bạn đã đồng hành!</h2>
    <p class="text-gray-600 mt-2 mb-6" style="color: var(--secondary-text);">Hành trình khám phá vẫn còn tiếp diễn. Hãy ghé thăm trang chủ của evERest nhé.</p>
    <a href="iindex.html">
        Về trang chủ eveREst
    </a>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    
    // --- Code cho Mascot (giữ nguyên) ---
    const provinceData = {
        soctrang: { position: 'left', flipped: false, dialog: ["Aha, mình đến Sóc Trăng rồi!", "Nơi đây là sự giao thoa văn hoá Kinh, Hoa, Khmer đặc sắc lắm đó.", "Bạn nhớ thử bánh Pía thơm lừng và ghé thăm Chùa Dơi bí ẩn nhé!", "Con người ở đây thì siêu dễ thương và hiếu khách luôn!"] },
        haugiang: { position: 'right', flipped: true, dialog: ["Tới Hậu Giang rồi, một vùng đất trù phú!", "Đây là vựa lúa lớn của miền Tây, và còn có khóm Cầu Đúc ngọt lịm.", "Mình nghe nói chợ nổi Ngã Bảy trên sông rất nhộn nhịp đó.", "Món chả cá thác lác ở đây là đặc sản số một, phải thử nha!"] },
        cantho: { position: 'left', flipped: false, dialog: ["Chào mừng đến Cần Thơ, thủ phủ của miền Tây sông nước!", "Bạn đã sẵn sàng đi thuyền trên Bến Ninh Kiều chưa?", "Chợ nổi Cái Răng buổi sáng sớm là một trải nghiệm tuyệt vời không thể bỏ lỡ.", "Cùng mình khám phá những miệt vườn cây trái sum suê nào!"] }
    };
    const mascotContainer = document.getElementById('mascot-container');
    const dialogBox = document.getElementById('dialog-box');
    const dialogText = document.getElementById('dialog-text');
    let dialogInterval;
    let activeProvince = null;

    function showMascot(provinceId) {
        if (activeProvince === provinceId) return;
        activeProvince = provinceId;
        const data = provinceData[provinceId];
        if (!data) return;
        mascotContainer.className = `position-${data.position}`;
        data.flipped ? mascotContainer.classList.add('flipped') : mascotContainer.classList.remove('flipped');
        mascotContainer.classList.add('visible');
        dialogBox.className = `visible dialog-from-${data.position}`;
        let sentenceIndex = 0;
        clearInterval(dialogInterval);
        const showNextSentence = () => {
            dialogBox.classList.remove('visible');
            void dialogBox.offsetWidth;
            dialogBox.classList.add('visible');
            dialogText.textContent = data.dialog[sentenceIndex];
            sentenceIndex = (sentenceIndex + 1) % data.dialog.length;
        };
        showNextSentence();
        dialogInterval = setInterval(showNextSentence, 4000);
    }

    function hideMascot(provinceId) {
        if (activeProvince === provinceId) {
            mascotContainer.classList.remove('visible');
            dialogBox.classList.remove('visible');
            activeProvince = null;
            clearInterval(dialogInterval);
        }
    }

    // --- Code cho hiệu ứng đếm số (giữ nguyên) ---
    function animateStatNumbers(element, target) {
        const duration = 2000; // Giảm thời gian đếm số
        const frameRate = 60;
        const totalFrames = Math.round((duration / 1000) * frameRate);
        const increment = target / totalFrames;
        let current = 0;
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            element.innerText = Math.floor(current).toLocaleString('vi-VN');
        }, 1000 / frameRate);
    }

    // --- Code Observer (Quan sát) ĐÃ THAY ĐỔI ---

    // 1. Observer cho Mascot VÀ Đếm số
    document.querySelectorAll('.province-section').forEach(section => {
        const provinceId = section.dataset.province;
        
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    showMascot(provinceId);

                    // Chạy hiệu ứng số đếm (chỉ 1 lần)
                    if (!section.dataset.animated) {
                        const isMobile = window.matchMedia("(max-width: 768px)").matches;
                        
                        if (isMobile) {
                            section.querySelectorAll('.stat-number').forEach((stat, index) => {
                                const target = parseInt(stat.dataset.target, 10);
                                stat.innerText = target.toLocaleString('vi-VN');
                                stat.classList.add('mobile-animate', `delay-${index + 1}`);
                            });
                        } else {
                            section.querySelectorAll('.stat-number').forEach(stat => {
                                const target = parseInt(stat.dataset.target, 10);
                                animateStatNumbers(stat, target);
                            });
                        }
                        
                        section.dataset.animated = "true";
                    }
                } else {
                    hideMascot(provinceId);
                }
            });
        }, { threshold: 0.5 }); // Kích hoạt khi 50% section lọt vào màn hình

        observer.observe(section);
    });

    // 2. THÊM MỚI: Observer cho các thẻ nội dung "cuộn"
    const narrativeObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
            } else {
                // Cho phép hiệu ứng chạy lại khi cuộn lên
                entry.target.classList.remove('is-visible');
            }
        });
    }, { threshold: 0.25 }); // Kích hoạt khi 25% thẻ lọt vào màn hình

    document.querySelectorAll('.narrative-block').forEach(block => {
        narrativeObserver.observe(block);
    });
});
</script>
</body>
</html>